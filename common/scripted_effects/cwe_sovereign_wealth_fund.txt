calculate_sovereign_wealth_fund = {

	#Compute size of Sovereign Wealth Fund
	set_variable = {
		name = sovereign_wealth_fund_gov_buildings
		value = 0
	}
	every_scope_building = {
		limit = {
			level > 0
			OR = {
				is_building_group = bg_manufacturing
				is_building_group = bg_agriculture
				is_building_group = bg_mining
				is_building_group = bg_logging
				is_building_group = bg_infrastructure
				is_building_group = bg_service
			}
			private_ownership_fraction < 0.5
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_gov_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_all_buildings
		value = 1
	}
	every_scope_building = {
		limit = {
			level > 0
			OR = {
				is_building_group = bg_manufacturing
				is_building_group = bg_agriculture
				is_building_group = bg_mining
				is_building_group = bg_logging
				is_building_group = bg_infrastructure
				is_building_group = bg_service
			}
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_all_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_proportion
		value = root.var:sovereign_wealth_fund_gov_buildings
	}
	if = {
		limit = { root.var:sovereign_wealth_fund_all_buildings > 0 }
		change_variable = {
			name = sovereign_wealth_fund_proportion
			divide = root.var:sovereign_wealth_fund_all_buildings
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_size
		value = root.investment_pool
	}
	change_variable = {
		name = sovereign_wealth_fund_size
		multiply = root.var:sovereign_wealth_fund_proportion
	}
	
	#Can only withdraw or deposit 1/100 of the Sovereign Wealth Fund per month
	set_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		divide = 100
	}
	
	#For diplay only
	set_variable = {
		name = sovereign_wealth_fund_size_display
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_size_display
		divide = 1000000
	}

}