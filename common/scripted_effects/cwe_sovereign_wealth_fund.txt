calculate_sovereign_wealth_fund = {

	#Compute size of Sovereign Wealth Fund
	set_variable = {
		name = sovereign_wealth_fund_gov_buildings
		value = 0
	}
	every_scope_building = {
		limit = {
			OR = { 
				is_building_type = building_financial_district
				is_building_type = building_manor_house
				has_active_production_method = pm_semi_privately_owned_building_government
			}
			OR = { 
				has_active_production_method = pm_semi_privately_owned_building_financial_centre
				has_active_production_method = pm_semi_publicly_traded_building_building_financial_centre
				has_active_production_method = pm_semi_privately_owned_building_manor_house
				has_active_production_method = pm_semi_publicly_traded_building_manor_house
				
				has_active_production_method = pm_semi_privately_owned_building_services
				has_active_production_method = pm_semi_publicly_traded_building_building_services
				
				has_active_production_method = pm_semi_privately_owned_building_government
				
				has_active_production_method = pm_semi_privately_owned_building_construction
				has_active_production_method = pm_semi_privately_owned_building_transportation
				has_active_production_method = pm_semi_privately_owned_building_skyscraper
			}
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_gov_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_all_buildings
		value = 1
	}
	every_scope_building = {
		limit = {
			OR = { 
				is_building_type = building_financial_district
				is_building_type = building_manor_house
			}
		}
		owner = {
			change_variable = {
				name = sovereign_wealth_fund_all_buildings
				add = 1
			}
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_proportion
		value = root.var:sovereign_wealth_fund_gov_buildings
	}
	if = {
		limit = { NOT = { root.var:sovereign_wealth_fund_all_buildings = 0 } }
		change_variable = {
			name = sovereign_wealth_fund_proportion
			divide = root.var:sovereign_wealth_fund_all_buildings
		}
	}
	set_variable = {
		name = sovereign_wealth_fund_size
		value = root.investment_pool
	}
	change_variable = {
		name = sovereign_wealth_fund_size
		multiply = root.var:sovereign_wealth_fund_proportion
	}
	
	#Can only withdraw or deposit 1/100 of the Sovereign Wealth Fund per month
	set_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_withdrawal_amount
		divide = 100
	}
	
	#For diplay only
	set_variable = {
		name = sovereign_wealth_fund_size_display
		value = root.var:sovereign_wealth_fund_size
	}
	change_variable = {
		name = sovereign_wealth_fund_size_display
		divide = 1000000
	}

}